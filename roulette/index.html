<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table{
            border: 3px solid black;
            border-collapse: collapse;
        }
        #td1,#td2,#td3,#td4,#td5,#td6,#td7,#td8,#td9,#td10,#td11,#td12,#td13,#td14,#td15,#td16{
            width: 90px;
            height: 90px;
            font-size: 45px;
            border: 1px solid black;
            text-align: center;
        }
        .change {
            background-color: rgb(157, 102, 211);
        }
        .resetAll {
            background-color: transparent ;
        }
        div {
            display: flex;
            justify-content: space-between;
            width: 300px;
            margin-top: 30px;
        }
        button{
            font-size: 20px;
        }
       .wearing {
            background-color: black;
        }
    </style>
</head>
<body>
    <table id="tb">
        <tr id="trr">
            <td class="tdNum" id="td1">1</td>
            <td class="tdNum" id="td2">2</td>
            <td class="tdNum" id="td3">3</td>
            <td class="tdNum" id="td4">4</td>
        </tr>
        <tr>
            <td class="tdNum" id="td5">5</td>
            <td class="tdNum" id="td6">6</td>
            <td class="tdNum" id="td7">7</td>
            <td class="tdNum" id="td8">8</td>
        </tr>
        <tr>
            <td class="tdNum" id="td9">9</td>
            <td class="tdNum" id="td10">10</td>
            <td class="tdNum" id="td11">11</td>
            <td class="tdNum" id="td12">12</td>
        </tr>
        <tr>
            <td class="tdNum" id="td13">13</td>
            <td class="tdNum" id="td14">14</td>
            <td class="tdNum" id="td15">15</td>
            <td class="tdNum" id="td16">16</td>
        </tr>
    </table>
    <div>
        <button id="start">スタート</button>
        <button id="stop">ストップ</button>
        <button id="reset">リセット</button>
    </div>
    
    <script>
        //document.addEventListener('DOMContentLoaded',function(){ 
        //画面遷移時にストップボタン、リセットボタンを非活性
        let stopBtn = document.getElementById('stop');
        let resetBtn = document.getElementById('reset');
        stopBtn.disabled = true;
        resetBtn.disabled = true;
        //})

        //1~16の配列を定義
        let list = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16];
        
        //マスの背景色変更処理
        let setNum;
        function changeCss(tdId){
            //取得された配列に紐づくIdをsetNumに入れておく
            setNum = tdId;

            //背景色の変更⇆削除の繰り返し
            tdId.classList.add('change');
            setTimeout(() => {
                tdId.classList.remove('change');
            },500
            );
        }
    
        //スタートボタン処理
        let i;
        let number
        function startevent (){
            //ストップボタン、リセットボタンを活性
            stopBtn.disabled = false;
            resetBtn.disabled = false;
            //0~15のランダムな値を取得
            i = Math.floor(Math.random() * list.length);
            number = i + 1;
            //↓挙動確認用↓
            //console.log(i);
            //console.log(number);


            //ランダムに取得した値0~15の条件分岐
            switch (number){ 
                case 1:
                    //マスの背景色変更処理を実行
                    changeCss(td1);
                    break;
                case 2:
                    changeCss(td2);
                    break
                case 3:
                    changeCss(td3);
                    break
                case 4:
                    changeCss(td4);
                    break
                case 5:
                    changeCss(td5);
                    break
                case 6:
                    changeCss(td6);
                    break
                case 7:
                    changeCss(td7);
                    break
                case 8:
                    changeCss(td8);
                    break
                case 9:
                    changeCss(td9);
                    break
                case 10:
                    changeCss(td10);
                    break
                case 11:
                    changeCss(td11);
                    break
                case 12:
                    changeCss(td12);
                    break
                case 13:
                    changeCss(td13);
                    break
                case 14:
                    changeCss(td14);
                    break
                case 15:
                    changeCss(td15);
                    break
                case 16:
                    changeCss(td16);
                    break
            }   
        };

        //ストップボタンクリック
        //スタートボタン処理をストップ
        document.getElementById('stop').addEventListener('click', function(){
            //スタートボタンの制御解除
            //startBtn.disabled = false;
            stopBtn.disabled = true;

            //スタートボタンクリック時の処理をストップさせる
            clearInterval(timerId);

            if(list.length == 0 ){
                startBtn.disabled = true;
            }else{
                startBtn.disabled = false;
            };

            //スタートボタンクリック時に取得した配列に紐づくIdの背景色を変更
            setNum.classList.add('change');
            //console.log(setNum);

            //配列から
            list.splice(i,1);
            console.log(i);
            //console.log(number);
            console.log(list);
            
        });

        //スタートボタンクリック
        //n秒ごとにスタートボタン処理を実行する
        let timerId;
        let startBtn = document.getElementById('start');
        startBtn.addEventListener('click', function(){
            timerId = setInterval(startevent, 1000);
            //スタートボタン制御
            startBtn.disabled = true;

        });
        
        //リセットボタンクリック
        //スタートボタン処理をストップ
        
        document.getElementById('reset').addEventListener('click', function(){
            
            clearInterval(timerId);
            list = [];

            //resetEvent();

            //let reset = document.getElementById('tb');
            //reset.classList.add('resetAll');

            //let id = document.getElementById('td1');
            //console.log(id);
            //let classN = document.getElementsByClassName('tdNum');
            //console.log(classN);

            //aiu();
            //let obj = document.querySelectorAll('td');
            //console.log(obj);
            //obj.style.backgroundColor = "white";
            
            
            //all.style.backgroundColor = 'black';

            //ストップボタンクリックで選択された値を全て削除したい
            //全てのマスのbackgroundColorをリセットしたい

        });
       
    </script>
</body>
</html>
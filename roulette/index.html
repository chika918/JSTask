<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table{
            border: 3px solid black;
            border-collapse: collapse;
        }
        #td1,#td2,#td3,#td4,#td5,#td6,#td7,#td8,#td9,#td10,#td11,#td12,#td13,#td14,#td15,#td16{
            width: 90px;
            height: 90px;
            font-size: 45px;
            border: 1px solid black;
            text-align: center;
        }
        .change {
            background-color: rebeccapurple;
        }
        .resetAll {
            background-color: transparent ;
            /*background-color: aqua;*/
        }
        div {
            display: flex;
            justify-content: space-between;
            width: 300px;
            margin-top: 30px;
        }
        button{
            font-size: 20px;
        }
       .wearing {
            background-color: black;
        }
    </style>
</head>
<body>
    <table id="tb">
        <tr id="trr">
            <td class="tdNum" id="td1">1</td>
            <td class="tdNum" id="td2">2</td>
            <td class="tdNum" id="td3">3</td>
            <td class="tdNum" id="td4">4</td>
        </tr>
        <tr>
            <td class="tdNum" id="td5">5</td>
            <td class="tdNum" id="td6">6</td>
            <td class="tdNum" id="td7">7</td>
            <td class="tdNum" id="td8">8</td>
        </tr>
        <tr>
            <td class="tdNum" id="td9">9</td>
            <td class="tdNum" id="td10">10</td>
            <td class="tdNum" id="td11">11</td>
            <td class="tdNum" id="td12">12</td>
        </tr>
        <tr>
            <td class="tdNum" id="td13">13</td>
            <td class="tdNum" id="td14">14</td>
            <td class="tdNum" id="td15">15</td>
            <td class="tdNum" id="td16">16</td>
        </tr>
    </table>
    <div>
        <button id="start">スタート</button>
        <button id="stop">ストップ</button>
        <button id="reset">リセット</button>
    </div>
    
    <script>
    document.addEventListener('DOMContentLoaded',function(){ 
        //画面遷移時にストップボタン、リセットボタンを非活性
        let stopBtn = document.getElementById('stop');
        let resetBtn = document.getElementById('reset');
        stopBtn.disabled = true;
        resetBtn.disabled = true;

        //マスNo.1~16のクラスを取得
        let list = document.getElementsByClassName('tdNum');

        //マスの色付けの処理
        let setNum;
        function changeCss(){
            setNum.classList.add('change');
        }
        //マスの色付け解除の処理
        function clearCss(){
            setNum.classList.remove('change');
        }
        //マスの色付け解除の処理を実行
        //実行タイミングをn秒後にする
        function resetCss(){
            setTimeout(clearCss,500);
        }
                    
        //スタートボタン処理
        let number;
        function startevent (){
            //ストップボタン、リセットボタンを活性
            stopBtn.disabled = false;
            resetBtn.disabled = false;
            //0~15のランダムな値を取得
            number = Math.floor(Math.random() * list.length);
            //↓挙動確認用↓
            //console.log(number);

            //ランダムに取得した値0~15の条件分岐
            switch (number){ 
                case 0:
                    //マスNo.1のIDを取得
                    setNum = document.getElementById('td1');
                    //マスの色付け処理を実行
                    changeCss();
                    //マスの色付け解除＆実行タイミング処理を実行
                    resetCss();
                    break;

                    //setTimeout(clearCss,500);

                case 1:
                    setNum = document.getElementById('td2');
                    changeCss();
                    resetCss();
                    break
                case 2:
                    setNum = document.getElementById('td3')
                    changeCss();
                    resetCss();
                    break
                case 3:
                    setNum = document.getElementById('td4')
                    changeCss();
                    resetCss();
                    break
                case 4:
                    setNum = document.getElementById('td5')
                    changeCss();
                    resetCss();
                    break
                case 5:
                    setNum = document.getElementById('td6')
                    changeCss();
                    resetCss();
                    break
                case 6:
                    setNum = document.getElementById('td7')
                    changeCss();
                    resetCss();
                    break
                case 6:
                    setNum = document.getElementById('td8')
                    changeCss();
                    resetCss();
                    break
                case 7:
                    setNum = document.getElementById('td8')
                    changeCss();
                    resetCss();
                    break
                case 8:
                    setNum = document.getElementById('td9')
                    changeCss();
                    resetCss();
                    break
                case 9:
                    setNum = document.getElementById('td10')
                    changeCss();
                    resetCss();
                    break
                case 10:
                    setNum = document.getElementById('td11')
                    changeCss();
                    resetCss();
                    break
                case 11:
                    setNum = document.getElementById('td12')
                    changeCss();
                    resetCss();
                    break
                case 12:
                    setNum = document.getElementById('td13')
                    changeCss();
                    resetCss();
                    break
                case 13:
                    setNum = document.getElementById('td14')
                    changeCss();
                    resetCss();
                    break
                case 14:
                    setNum = document.getElementById('td15')
                    changeCss();
                    resetCss();
                    break
                case 15:
                    setNum = document.getElementById('td16')
                    changeCss();
                    resetCss();
                    break
            }   
        };

        //スタートボタンクリック
        //n秒ごとにスタートボタン処理を実行する
        let timerId;
        let startBtn = document.getElementById('start');
        startBtn.addEventListener('click', function(){
            timerId = setInterval(startevent, 1000);

            //スタートボタン制御
            startBtn.disabled = true;

        });

        //ストップボタンクリック
        //スタートボタン処理をストップ
        document.getElementById('stop').addEventListener('click', function(){
            clearInterval(timerId);
            setNum.classList.add('change');

            //スタートボタンの制御解除
            startBtn.disabled = false;

            //ストップボタンをダブルクリックしないとマスの背景の色付けが固定されない
            //　→クリック時にマスの背景の色付けを固定したい
            //ストップボタンクリック時に選択された値を保持→選択肢から除外したい
            //　→splice
    
        });

        
        //リセットボタンクリック
        //スタートボタン処理をストップ
        let array = [];
        function resetEvent (){
            for(let i = 0; i <16 ; i++){
                array.push(document.getElementById('td'+i));
            }
            array.classList.add('resetAll');
            //array.style.backgroundColor = 'black'
            console.log(array);
        }
        
        document.getElementById('reset').addEventListener('click', function(){
            clearInterval(timerId);
            resetEvent();

            //let reset = document.getElementById('tb');
            //reset.classList.add('resetAll');

            //let id = document.getElementById('td1');
            //console.log(id);
            //let classN = document.getElementsByClassName('tdNum');
            //console.log(classN);

            //aiu();
            //let obj = document.querySelectorAll('td');
            //console.log(obj);
            //obj.style.backgroundColor = "white";
            
            
            //all.style.backgroundColor = 'black';

           

            //ストップボタンクリックで選択された値を全て削除したい
            //全てのマスのbackgroundColorをリセットしたい

        });
        
    })
       
    </script>
</body>
</html>